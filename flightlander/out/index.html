<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Flight Lander</h1>
<h2>The Calculus of Images</h2>
<p><a href="https://htdp.org/2020-8-1/Book/part_one.html#%28part._sec~3aarith-images%29">The Arithmetic of Images</a>
is an interesting section in <q>How To Design Programs</q> touching on a something that comes up a lot in games
or any other kind of graphical programming.</p>
<p>One of Eddi Woo's excellent youtube lessons <a href="https://www.youtube.com/watch?v=JsduHKckB04&t=2s">
What is the basic building block of all mathematics? (A surprising answer!)</a> explains that sets and
what operations hold between elements of a given set form the foundation of the subject.</p>
<p>A reason HTDP started with <em>arithmetic</em> of various types was because it lead to <em>algebra</em>
where things are assigned to variables, which can be done with images — though that requires different
thinking to most <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial">canvas tutorials</a>
which don't treat images as being akin to integers, strings and other atomic types.</p>
<h3>What is the type of an image?</h3>
<p>Instead of drawing things on a screen, the idea is that functions like circle, square etc return something to
to be used as inputs for functions like overlay, underlay, above, and beside which in turn return something that can be drawn.</p>
<p>Figuring out what should be returned lead into a maze whose dead ends included ImageData and Image Obects themselves.
Finally, I reached the enlightenment that what should be returned is a
<a href="https://javascript.info/promise-basics">promise</a>.</p>
<p>To draw what is returned from what Racket calls
<a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image~3f%29%29">
image?</a> requires <em>then</em> chaining:</p>
<pre class="prettyprint source lang-javascript"><code>circle(20, &quot;solid&quot;, &quot;red&quot;)
.then(image => ctx.drawImage(image, 0, 0));
</code></pre>
<p>Though a little ugly and alien at first, it sidesteps many other complexities of web application development.</p>
<h3>What operations can be done on images?</h3>
<p>Much as summing a list of integers would return a new integer, the basic idea here is that functions that consume
any number of images returns a new image. (Due to the nitty-gritty of JavaScript, in the same way that the basic
image creation functions return promises containing the image, these functions similarly have promises as an
outer wrapper).</p>
<p>Again, here I'm going to use <a href="https://docs.racket-lang.org/teachpack/2htdpimage-guide.html">HTDP</a> as a guide
and translate it's examples to JavaScript.</p>
<pre class="prettyprint source lang-javascript"><code>above(triangle(40, &quot;solid&quot;, &quot;red&quot;), rectangle(40, 30, &quot;solid&quot; &quot;black&quot;));
</code></pre>
<p>creates a simple picture of a house.</p>
<img src="house1.png" />
<p>Note there are no co-ordinates, the above function hides all the maths.</p>
<p>This function was my introduction to JavaScript's relatively new
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">funName(...args)</a>
syntax which allows a function to take any number of parameters and converts them into a list.</p>
<p>The next step was to emulate 2htdpimage's beside operator, which only needed slight addaption of the above operator:</p>
<pre class="prettyprint source lang-javascript"><code>above( beside(triangle(40, &quot;solid&quot;, &quot;red&quot;), triangle(40, &quot;solid&quot;, &quot;red&quot;))
     , rectangle(80, 30, &quot;solid&quot;, &quot;black&quot;));
</code></pre>
<img src="house2.png" />
<h3>Image Rotation</h3>
<dl>
  <dt>θ</dt><dd>Angle in radians, counterclockwise positive</dd>
  <dt>(x<sub>0</sub>, y<sub>0</sub>)</dt><dd>Centre of image (point around which rotation is done)</dd>
  <dt>(x<sub>1</sub>, y<sub>1</sub>)</dt><dd>Pre-rotation co-ordinate</dd>
  <dt>(x<sub>2</sub>, y<sub>2</sub>)</dt><dd>Post-rotation co-ordinate</dd>
</dl>
<pre class="prettyprint source lang-javascript"><code>function rotate_coordinates(radians, x0, y0, x1, y1) {
  const dx = x1 - x0;
  const dy = y1 - y0;
  const x2 =   dx*Math.cos(radians) - dy*Math.sin(radians);
  const y2 =   dx*Math.sin(-radians) + dy*Math.cos(radians);
  return [x2, y2];
}
</code></pre>
<p>x<sub>2</sub>=cos(θ)<em>(x1−x0)+sin(θ)</em>(y1−y0)y2=−sin(θ)<em>(x1−x0)+cos(θ)</em>(y1−y0)</p>
<h3>Image transformation</h3>
<p>Transformation matrix</p>
<pre class="prettyprint source lang-javascript"><code>[ [a, c, e]
, [b, d, f]
, [0, 0, 1]
]

[ [cos(a), -sin(a), 0]
, [sin(a),  cos(a), 0]
, [     0,       0, 1]
]

```javascript
(rotate 45 (ellipse 60 20 &quot;solid&quot; &quot;olivedrab&quot;))
</code></pre>
<h2>Drawing traditional maths graphs</h2>
<p>The first gotcha in trying to use Cartesian co-ordinates is the <em>center</em>, ie x=0 and y=0,
is the top left corner. Is is easily moved to wherever we want the center to be with</p>
<pre class="prettyprint source lang-javascript"><code>  ctx.translate(x0, y0);
</code></pre>
<p>The second gotcha is the computer graphics convention is for down to be positive and up negative, so
the sign of y needs to be flipped (ie -y).</p>
<p>Return values <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/createImageData"></p>
<p>https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/createImageData</p>
<h3>Canvas co-ordiants -> Cartesian co-ordinates</h3>
<p>A gotcha with 'rgba(255, 0, 0, 0.5)' is the alpha value is a value between 0 and 1, not 0 and 255 as the other
three values.</p>
<h2>Colour Calculations</h2>
<table>
<tr><th>keyword</th><th>#hex</th><th>rgb</th><th>hsl</th></tr>
<tr><td>black</td><td>#000000</td><td>rgb(0, 0, 0)</td><td>hsl(0, 100%, 50%)</td></tr>
<tr><td>brown</td><td>#A52A2A</td><td>rgb(165, 42, 42)</td><td></td></tr>
<tr><td>red</td><td>#FF0000</td><td>rgb(255, 0, 0)</td><td>hsl(0, 100%, 50%)</td></tr>
<tr><td>orange</td><td>#FFA500</td><td>rgb(255, 165, 0)</td><td></td></tr>
<tr><td>yellow</td><td>#FFFF00</td><td>rgb(255, 215, 0)</td><td>hsl(60, 100%, 50%)</td></tr>
<tr><td>green</td><td>#008000</td><td>rgb(0, 128, 0)</td><td>hsl(120, 100%, 50%)</td></tr>
<tr><td>blue</td><td>#0000FF</td><td>rgb(0, 0, 255)</td><td>hsl(240, 100%, 50%)</td></tr>
<tr><td>indigo</td><td>#4B0082</td><td>rgb(75, 0, 130)</td><td></td></tr>
<tr><td>violet</td><td>#EE82EE</td><td>rgb(238, 130, 238)</td><td></td></tr>
<tr><td>white</td><td>#FFFFFF</td><td>rgb(255, 255, 255)</td><td></td></tr>
</table>
<h3><a href="https://en.wikipedia.org/wiki/HSL_and_HSV">hue, saturation, lightness</a></a>
<h4>Hue</h4>
<p>A color wheel based on the
<a href="https://en.wikipedia.org/wiki/Munsell_color_system">Munsell Color System</a></p>
<p>hue, saturation, lightness</p>
<p>Cylindrical model, where 0° is red,</p>
<p><code><pre>
├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">Canvas</a>
│   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement">HTMLCanvasElement</a>
│   │   └── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement#Properties">Properties</a>
│   │   .   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/width">width</a>
│   │   .   └── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/height">height</a>
│   └── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a>
│   .   ├── Constructor/Instantiator
│   .   │   └── <a href="developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext">HTMLCanvasElement.getContext()</a>
│   .   ├── Properties
│   .   │   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle">fillStyle</a>
│   .   │   └── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font">font</a>
│   .   └── Methods
│   .   .   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/clearRect">clearRect()</a>
│   .   .   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage">drawImage()</a>
│   .   .   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillText">fillText()</a>
│   .   .   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/restore">restore()</a>
│   .   .   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/rotate">rotate()</a>
│   .   .   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/save">save()</a>
│   .   .   └── <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/translate">translate()</a>
└── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement">HTMLImageElement</a>
.   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement#Constructor">Constructor</a>
.   │   └── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image">Image()</a>
.   └── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement#Properties">Properties</a>
.   .   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/width">width</a>
.   .   ├── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/height">height</a>
.   .   └── <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/src">src</a>
</pre></code></p></article>
    </section>









<section>

<header>
    
        <h2>graph.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">graph</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="graph.js.html">graph.js</a>, <a href="graph.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>image.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">image</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="image.js.html">image.js</a>, <a href="image.js.html#line3">line 3</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html">HTDP image package</a></li>
        </ul>
    </dd>
    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>universe.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">This is a translation of a Racket package, partly done to learn JavaScript's module conventions.</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="universe.js.html">universe.js</a>, <a href="universe.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://docs.racket-lang.org/teachpack/2htdpuniverse.html">HTDP universe package</a></li>
        </ul>
    </dd>
    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#above">above</a></li><li><a href="global.html#beside">beside</a></li><li><a href="global.html#besideAlign">besideAlign</a></li><li><a href="global.html#circle">circle</a></li><li><a href="global.html#ellipse">ellipse</a></li><li><a href="global.html#graphF">graphF</a></li><li><a href="global.html#line">line</a></li><li><a href="global.html#overlay">overlay</a></li><li><a href="global.html#placeImage">placeImage</a></li><li><a href="global.html#rectangle">rectangle</a></li><li><a href="global.html#rotate">rotate</a></li><li><a href="global.html#square">square</a></li><li><a href="global.html#text">text</a></li><li><a href="global.html#transparencyFillShape">transparencyFillShape</a></li><li><a href="global.html#triangle">triangle</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Tue Aug 18 2020 15:18:55 GMT+0200 (South Africa Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>